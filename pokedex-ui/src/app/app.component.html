<!-- src/app/app.component.html -->
<div class="page">
  <!-- Top bar -->
  <header class="top-bar">
    <div class="top-bar-left">
      <span class="logo-ball"></span>
      <span class="logo-text">Pokédex</span>
    </div>
  </header>

  <!-- Search bar -->
  <section class="search-section">
    <input
      type="text"
      [(ngModel)]="searchName"
      (keyup.enter)="onSearch()"
      placeholder="Search Pokémon by name (e.g. bulbasaur)"
    />
    <button class="search-btn" (click)="onSearch()">
      Search
    </button>
  </section>

  <!-- Toolbar: Surprise Me + Sort -->
  <section class="toolbar">
    <button class="surprise-btn" (click)="surpriseMe()">
      Surprise Me!
    </button>

    <div class="sort-control">
      <span>Sort By</span>
      <select [(ngModel)]="sortOrder" (change)="applySort()">
        <option value="id-desc">Highest Number (First)</option>
        <option value="id-asc">Lowest Number (First)</option>
        <option value="name-asc">Name (A–Z)</option>
      </select>
    </div>
  </section>

  <!-- Error message -->
  <p class="error" *ngIf="error">
    {{ error }}
  </p>

  <!-- Card grid -->
  <section class="grid-section">
    <div *ngIf="listLoading" class="loading">
      Loading Pokédex…
    </div>

    <div class="grid" *ngIf="!listLoading">
      <div
        class="grid-card"
        *ngFor="let p of pokemonList"
        (click)="onCardClick(p)"
        [class.selected]="selected?.id === p.id"
      >
        <div class="grid-image-wrapper">
          <img
            [src]="p.artwork || p.spriteFront"
            [alt]="p.name"
          />
        </div>
        <div class="grid-info">
          <div class="grid-id">
            #{{ p.id | number: '2.0' }}
          </div>
          <div class="grid-name">
            {{ p.name | titlecase }}
          </div>
          <div class="grid-types">
            <span class="type-chip" *ngFor="let t of p.types">
              {{ t | titlecase }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Detail panel (shown when a card is clicked or after search) -->
<!-- Detail panel (Pokémon info page style) -->
<section class="detail-section" *ngIf="selected">
  <div class="detail-wrapper">
    <!-- Left: large artwork -->
    <div class="detail-image">
      <img
        [src]="selected.artwork || selected.spriteFront"
        [alt]="selected.name"
      />
    </div>

    <!-- Right: blue info card -->
    <div class="detail-info-card">
      <h2 class="detail-name">
        {{ selected.name | titlecase }}
        <span class="detail-id">#{{ selected.id }}</span>
      </h2>

      <p class="detail-meta" *ngIf="selected.cached">
        Served from cache • {{ selected.fetchedAt }}
      </p>

      <div class="detail-info-grid">
        <div>
          <div class="info-label">Height</div>
          <div class="info-value">{{ selected.height }}</div>
        </div>
        <div>
          <div class="info-label">Weight</div>
          <div class="info-value">{{ selected.weight }}</div>
        </div>
        <div>
          <div class="info-label">Abilities</div>
          <div class="info-value">
            {{ selected.abilities.join(', ') | titlecase }}
          </div>
        </div>
        <div>
          <div class="info-label">Types</div>
          <div class="info-value">
            <span class="type-chip" *ngFor="let t of selected.types">
              {{ t | titlecase }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lower row: stats + type/weaknesses -->
  <div class="detail-lower">
    <div class="detail-stats">
      <h3>Stats</h3>
      <div class="stat-row" *ngFor="let stat of statEntries">
        <span class="stat-name">{{ stat[0] | titlecase }}</span>
        <div class="stat-bar-wrapper">
          <div
            class="stat-bar-fill"
            [style.width.%]="(stat[1] / 150) * 100"
          ></div>
        </div>
        <span class="stat-value">{{ stat[1] }}</span>
      </div>
    </div>

    <div class="detail-types">
      <h3>Type</h3>
      <div class="type-row">
        <span class="type-chip big" *ngFor="let t of selected.types">
          {{ t | titlecase }}
        </span>
      </div>

      <h3>Weaknesses</h3>
      <div class="type-row">
        <!-- simple static example; can be replaced by real type chart later -->
        <span class="weak-chip" *ngFor="let w of ['Water', 'Ground', 'Rock']">
          {{ w }}
        </span>
      </div>
    </div>
  </div>
</section>

</div>
